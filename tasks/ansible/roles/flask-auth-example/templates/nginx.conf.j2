server {
        listen 80;
        server_name {{ host_name }} www.{{ host_name }};

        access_log /var/log/nginx/auth_server.access.log;
        error_log  /var/log/nginx/auth_server.error.log;

        location / {
                proxy_pass              http://{% if docker %}{{ app_name }}{% else %}127.0.0.1{% endif %}:5000;
                proxy_http_version      1.1;
                proxy_set_header        HOST                    $host;
                proxy_set_header        X-Real_IP               $remote_addr;
                proxy_set_header        X-Forward-For           $proxy_add_x_forwarded_for;
                proxy_set_header        X-Forwarded-Proto       $scheme;
                proxy_set_header        X-Forwarded-Host        $server_name;

                proxy_set_header        Upgrade           $http_upgrade;
                proxy_set_header        Connection        "upgrade";
        }

        location /static/ {
                alias {% if docker %}/app/static/{% else %}/srv/static{% endif %};
                add_header Cache-Control "public, immutable";
        }

}